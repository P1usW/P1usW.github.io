"use strict";(self.webpackChunkbuysaleacademy=self.webpackChunkbuysaleacademy||[]).push([[795],{1550:(e,n,t)=>{t.d(n,{l:()=>o});var s=t(169),a=t(743),r=t(7294);const o=()=>{const e=(0,r.useId)()+String(Date.now()),n=(0,a.I0)();return t=>{let{type:a,body:r}=t;n((0,s.wN)({id:e+String(Math.random()),type:a,body:r}))}}},8709:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var s=t(5893),a=t(7536),r=t(3620),o=t(4640);const i="pages-ProfilePage-components-UserInfoChange-user-info__profile_form",l="pages-ProfilePage-components-UserInfoChange-user-info__profile_header";var c=t(7294),d=t(9250),m=t(8268),u=t(1550),p=t(2861),f=function(e,n,t,s){return new(t||(t=Promise))((function(a,r){function o(e){try{l(s.next(e))}catch(n){r(n)}}function i(e){try{l(s.throw(e))}catch(n){r(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}l((s=s.apply(e,n||[])).next())}))};const h={method:"patch",timeout:5e3,withCredentials:!0};const b=()=>{const{userInfo:e}=(0,d.f_)(),n=(0,u.l)(),t=(0,d.s0)();if((0,c.useEffect)((()=>{"code"in e&&401===e.code?n({type:"error",body:e.name}):"code"in e&&n({type:"info",body:e.name})}),[]),"code"in e&&401===e.code)return(0,s.jsx)(d.Fg,{to:"/login"});if("code"in e)return(0,s.jsx)(d.Fg,{to:"/user"});const b=(0,a.cI)({mode:"all",defaultValues:{firstName:e.first_name,lastName:e.second_name,secondName:e.middle_name,email:e.email,telephone:e.phone_number}}),{handleSubmit:j}=b;return(0,s.jsx)(c.Suspense,Object.assign({fallback:(0,s.jsx)(m.Z,{})},{children:(0,s.jsx)(a.RV,Object.assign({},b,{children:(0,s.jsxs)("form",Object.assign({className:i,onSubmit:j((e=>{(function(e,n){var t,s,a;return f(this,void 0,void 0,(function*(){"object"==typeof e&&(n=e,e="api/user/update");try{return{name:"Данные успешно изменены",code:(yield p.Z.patch(e,n,Object.assign({},h))).status}}catch(r){const e=r;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)?{name:"Ошибка авторизации, пожалуйста, войдите в профиль снова",code:null===(s=e.response)||void 0===s?void 0:s.status}:{name:"Произошла ошибка, повторите попытку позже",code:null===(a=e.response)||void 0===a?void 0:a.status}}}))})({first_name:e.firstName,second_name:e.lastName,middle_name:e.secondName,email:e.email,phone_number:e.telephone}).then((e=>{401===e.code&&t("/login")})).catch((e=>console.log(e)))}))},{children:[(0,s.jsx)("h2",Object.assign({className:l},{children:"Личная информация"})),(0,s.jsx)(r.Z,{label:"Имя",type:"text",name:"firstName",required:"Пожалуйста введите своё имя"}),(0,s.jsx)(r.Z,{label:"Фамилия",type:"text",name:"lastName",required:"Пожалуйста введите свою фамилию"}),(0,s.jsx)(r.Z,{label:"Отчество",type:"text",name:"secondName"}),(0,s.jsx)("h2",Object.assign({className:l},{children:"Контактные данные"})),(0,s.jsx)(r.Z,{label:"Номер телефона",type:"tel",name:"telephone",required:"Пожалуйста введите свой номер телефона"}),(0,s.jsx)(r.Z,{label:"Электронная почта",type:"email",name:"email",required:"Пожалуйста введите свою почту"}),(0,s.jsx)(o.Z,{text:"Зарегистрироваться"})]}))}))}))}},4640:(e,n,t)=>{t.d(n,{Z:()=>r});var s=t(5893);const a="pages-ProfilePage-ui-FormBtn-form-btn__form_btn",r=e=>{let{text:n}=e;return(0,s.jsx)("input",{value:n,type:"submit",className:a})}},3620:(e,n,t)=>{t.d(n,{Z:()=>o});var s=t(5893),a=t(7536);t(6311);const r=/./,o=e=>{let{name:n,label:t,type:o,required:i,pattern:l=r,message:c=""}=e;var d;const m=(0,a.Gc)(),{register:u,formState:{errors:p}}=m;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{children:[t,(0,s.jsx)("br",{}),(0,s.jsx)("input",Object.assign({type:o,className:"input"},u(n,{required:i,pattern:{value:l,message:c}})))]}),(0,s.jsx)("p",Object.assign({className:"error_message"},{children:null===(d=p[n])||void 0===d?void 0:d.message}))]})}},6311:()=>{}}]);