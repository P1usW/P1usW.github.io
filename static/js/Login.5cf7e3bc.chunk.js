"use strict";(self.webpackChunkbuysaleacademy=self.webpackChunkbuysaleacademy||[]).push([[438],{1550:(e,s,n)=>{n.d(s,{l:()=>o});var t=n(169),a=n(743),r=n(7294);const o=()=>{const e=(0,r.useId)()+String(Date.now()),s=(0,a.I0)();return n=>{let{type:a,body:r}=n;s((0,t.wN)({id:e+String(Math.random()),type:a,body:r}))}}},6554:(e,s,n)=>{n.r(s),n.d(s,{default:()=>v});var t=n(5893),a=n(2861),r=function(e,s,n,t){return new(n||(n=Promise))((function(a,r){function o(e){try{l(t.next(e))}catch(s){r(s)}}function i(e){try{l(t.throw(e))}catch(s){r(s)}}function l(e){var s;e.done?a(e.value):(s=e.value,s instanceof n?s:new n((function(e){e(s)}))).then(o,i)}l((t=t.apply(e,s||[])).next())}))};const o={method:"post",timeout:5e3,withCredentials:!0};var i=n(4640),l=n(8764),c=n(9250),d=n(9655),g=n(3620),p=n(759),u=n(7536);const m={login:"pages-ProfilePage-components-LoginPage-login__login",login_form:"pages-ProfilePage-components-LoginPage-login__login_form",login_link:"pages-ProfilePage-components-LoginPage-login__login_link",link_container:"pages-ProfilePage-components-LoginPage-login__link_container"};n(6311);var h=n(1550);const v=()=>{const e=(0,u.cI)({mode:"all",defaultValues:{telephone:"",password:""}}),{handleSubmit:s}=e,n=(0,c.s0)(),v=(0,l.f)(),j=(0,h.l)();return(0,t.jsx)("section",Object.assign({className:m.login},{children:(0,t.jsxs)(u.RV,Object.assign({},e,{children:[(0,t.jsxs)("form",Object.assign({className:["form",m.login_form].join(" "),onSubmit:s((e=>{(function(e,s){var n,t,i;return r(this,void 0,void 0,(function*(){try{return(yield a.Z.post(e,s,Object.assign({},o))).data}catch(r){const e=r;return console.log(e),401===(null===(n=e.response)||void 0===n?void 0:n.status)?{name:"Неверный логин или пароль, попробуйте снова!",code:null===(t=e.response)||void 0===t?void 0:t.status}:{name:"Произошла ошибка, повторите попытку позже",code:null===(i=e.response)||void 0===i?void 0:i.status}}}))})("/api/login",{login:e.telephone,password:e.password}).then((e=>{"access"in e?(v(e.access),j({body:"Вы успешно авторизировались",type:"accept"}),n("/user")):j({body:e.name,type:"error"})})).catch((e=>console.log(e)))}))},{children:[(0,t.jsx)("h1",{children:"Вход"}),(0,t.jsx)(g.Z,{type:"text",name:"telephone",label:"Почта или номер телефона",required:"Пожалуйста введите почту или номер телефона"}),(0,t.jsx)(p.Z,{name:"password",label:"Пароль",required:"Пожалуйста введите пароль"}),(0,t.jsx)(i.Z,{text:"Войти"})]})),(0,t.jsxs)("div",Object.assign({className:m.link_container},{children:[(0,t.jsx)(d.rU,Object.assign({to:"/",className:m.login_link},{children:"Забыли пароль?"})),(0,t.jsx)(d.rU,Object.assign({to:"/registration",className:m.login_link},{children:"Зарегестрироваться"}))]}))]}))}))}},8764:(e,s,n)=>{n.d(s,{f:()=>r});var t=n(743),a=n(1448);const r=()=>{const e=(0,t.I0)();return s=>{localStorage.setItem("accessToken",s),e((0,a.p)({accessToken:s}))}}},4640:(e,s,n)=>{n.d(s,{Z:()=>r});var t=n(5893);const a="pages-ProfilePage-ui-FormBtn-form-btn__form_btn",r=e=>{let{text:s}=e;return(0,t.jsx)("input",{value:s,type:"submit",className:a})}},3620:(e,s,n)=>{n.d(s,{Z:()=>o});var t=n(5893),a=n(7536);n(6311);const r=/./,o=e=>{let{name:s,label:n,type:o,required:i,pattern:l=r,message:c=""}=e;var d;const g=(0,a.Gc)(),{register:p,formState:{errors:u}}=g;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{children:[n,(0,t.jsx)("br",{}),(0,t.jsx)("input",Object.assign({type:o,className:"input"},p(s,{required:i,pattern:{value:l,message:c}})))]}),(0,t.jsx)("p",Object.assign({className:"error_message"},{children:null===(d=u[s])||void 0===d?void 0:d.message}))]})}},759:(e,s,n)=>{n.d(s,{Z:()=>u});var t=n(5893),a=n(7294),r=n(7536);const o=()=>(0,t.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"32",viewBox:"0 0 384 512"},{children:(0,t.jsx)("path",{fill:"currentColor",d:"M192 0q-52 0-90 38t-38 90v64q-27 0-45.5 18.5T0 \r\n          256v192q0 27 18.5 45.5T64 512h256q27 0 45.5-18.5T384 \r\n          448V256q0-27-18.5-45.5T320 192v-64q0-52-38-90T192 \r\n          0zm149 256v192q0 21-21 21H64q-21 0-21-21V256q0-21 \r\n          21-21h256q21 0 21 21zm-234-64v-64q0-35 25-60t60-25t60 \r\n          25t25 60v64H107zm85 64q-27 0-45.5 18.5T128 320q0 20 \r\n          12 36.5t31 23.5v25q0 22 21 22t21-22v-25q43-15 \r\n          43-60q0-27-18.5-45.5T192 256zm0 85q-21 0-21-21t21-21t21 \r\n          21t-21 21z"})})),i=()=>(0,t.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"32",viewBox:"0 0 384 512"},{children:(0,t.jsx)("path",{fill:"currentColor",d:"M192 43q35 0 60 25t25 60q0 21 22 21q21 0 21-21q0-52-38-90T192 \r\n          0t-90 38t-38 90v64q-27 0-45.5 18.5T0 256v192q0 27 18.5 45.5T64 \r\n          512h256q27 0 45.5-18.5T384 448V256q0-27-18.5-45.5T320 \r\n          192H107v-64q0-35 25-60t60-25zm128 192q21 0 21 21v192q0 21-21 \r\n          21H64q-21 0-21-21V256q0-21 21-21h256zM171 380v25q0 22 21 \r\n          22t21-22v-25q43-15 43-60q0-27-18.5-45.5T192 256t-45.5 18.5T128 \r\n          320q0 20 12 36.5t31 23.5zm21-81q21 0 21 21t-21 21t-21-21t21-21z"})})),l="pages-ProfilePage-ui-PasswordInput-password-input__password",c="pages-ProfilePage-ui-PasswordInput-password-input__password_input",d="pages-ProfilePage-ui-PasswordInput-password-input__switch",g="pages-ProfilePage-ui-PasswordInput-password-input__switch_input";n(6311);const p=/^[a-zA-Z0-9=+-_@!?$%]{8,}$/,u=e=>{let{name:s,label:n,required:u,pattern:m=p,message:h="Пароль должен состоять из 8 символов a-z, A-Z, 0-9, _, -, @, +, =, ?, !, $, %"}=e;var v;const[j,x]=(0,a.useState)("password"),q=(0,r.Gc)(),{register:b,formState:{errors:w}}=q;return(0,t.jsxs)("div",Object.assign({className:l},{children:[(0,t.jsxs)("label",{children:[n,(0,t.jsx)("br",{}),(0,t.jsx)("input",Object.assign({className:c,type:j},b(s,{required:u,pattern:{value:m,message:h}}))),(0,t.jsxs)("label",Object.assign({className:d},{children:[(0,t.jsx)("input",{type:"checkbox",onChange:()=>{x("text"===j?"password":"text")},className:g}),"text"===j?(0,t.jsx)(i,{}):(0,t.jsx)(o,{})]}))]}),(0,t.jsx)("p",Object.assign({className:"error_message"},{children:null===(v=w[s])||void 0===v?void 0:v.message}))]}))}},6311:()=>{}}]);