"use strict";(self.webpackChunkbuysaleacademy=self.webpackChunkbuysaleacademy||[]).push([[150],{1550:(e,t,s)=>{s.d(t,{l:()=>i});var a=s(169),r=s(743),n=s(7294);const i=()=>{const e=(0,n.useId)()+String(Date.now()),t=(0,r.I0)();return s=>{let{type:r,body:n}=s;t((0,a.wN)({id:e+String(Math.random()),type:r,body:n}))}}},3973:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(5893),r=s(7536),n=s(9250),i=s(9655),o=s(3620),l=s(759),c=s(4640);const d={registration:"pages-ProfilePage-components-RegistrationPage-registration-page__registration",registration_form:"pages-ProfilePage-components-RegistrationPage-registration-page__registration_form",registration_link:"pages-ProfilePage-components-RegistrationPage-registration-page__registration_link",link_container:"pages-ProfilePage-components-RegistrationPage-registration-page__link_container",radio_container:"pages-ProfilePage-components-RegistrationPage-registration-page__radio_container"};s(6311);var m=s(1550),p=s(8764),g=s(2861),u=function(e,t,s,a){return new(s||(s=Promise))((function(r,n){function i(e){try{l(a.next(e))}catch(t){n(t)}}function o(e){try{l(a.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,o)}l((a=a.apply(e,t||[])).next())}))};const h={method:"post",timeout:5e3,withCredentials:!0};const v=/@{1,1}/,j=()=>{const e=(0,r.cI)({mode:"all",defaultValues:{firstName:"",lastName:"",secondName:"",email:"",dateOfBirth:"",telephone:"",password:""}}),{handleSubmit:t}=e,s=(0,n.s0)(),j=(0,p.f)(),x=(0,m.l)();return(0,a.jsx)("section",Object.assign({className:d.registration},{children:(0,a.jsxs)(r.RV,Object.assign({},e,{children:[(0,a.jsxs)("form",Object.assign({className:["form",d.registration_form].join(" "),onSubmit:t((e=>{let{firstName:t,lastName:a,secondName:r,dateOfBirth:n,email:i,password:o,telephone:l}=e;(function(e,t){var s,a,r;return u(this,void 0,void 0,(function*(){try{return(yield g.Z.post(e,{first_name:t.firstName,second_name:t.lastName,middle_name:t.secondName,email:t.email,phone_number:t.telephone,birthday:t.dateOfBirth,password:t.password},Object.assign({},h))).data}catch(n){const e=n;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)?{name:"Неверный логин или пароль, попробуйте снова!",code:null===(a=e.response)||void 0===a?void 0:a.status}:{name:"Произошла ошибка, повторите попытку позже",code:null===(r=e.response)||void 0===r?void 0:r.status}}}))})("/api/register",{firstName:t,lastName:a,secondName:r,dateOfBirth:n,email:i,password:o,telephone:l}).then((e=>{"access"in e?(j(e.access),x({body:"Вы успешно зарегестрировались",type:"accept"}),s("/user")):x({body:e.name,type:"error"})})).catch((e=>console.log(e)))}))},{children:[(0,a.jsx)("h1",{children:"Регистрация"}),(0,a.jsx)(o.Z,{label:"Имя",type:"text",name:"firstName",required:"Пожалуйста введите своё имя"}),(0,a.jsx)(o.Z,{label:"Фамилия",type:"text",name:"lastName",required:"Пожалуйста введите свою фамилию"}),(0,a.jsx)(o.Z,{label:"Отчество",type:"text",name:"secondName"}),(0,a.jsx)(o.Z,{label:"Дата рождения",type:"date",name:"dateOfBirth",required:"Пожалуйста укажите дату рождения"}),(0,a.jsx)(o.Z,{label:"Номер телефона",type:"tel",name:"telephone",required:"Пожалуйста введите свой номер телефона"}),(0,a.jsx)(o.Z,{label:"Электронная почта",type:"email",name:"email",pattern:v,message:"Адресс электронной почты должен содержать знак @",required:"Пожалуйста введите свою почту"}),(0,a.jsx)(l.Z,{label:"Пароль",name:"password",required:"Пожалуйста введите пароль"}),(0,a.jsx)(c.Z,{text:"Зарегистрироваться"})]})),(0,a.jsxs)("div",Object.assign({className:d.link_container},{children:["Есть аккаунт?",(0,a.jsx)(i.rU,Object.assign({to:"/login",className:d.registration_link},{children:"Войти"}))]}))]}))}))}},8764:(e,t,s)=>{s.d(t,{f:()=>n});var a=s(743),r=s(1448);const n=()=>{const e=(0,a.I0)();return t=>{localStorage.setItem("accessToken",t),e((0,r.p)({accessToken:t}))}}},4640:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(5893);const r="pages-ProfilePage-ui-FormBtn-form-btn__form_btn",n=e=>{let{text:t}=e;return(0,a.jsx)("input",{value:t,type:"submit",className:r})}},3620:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(5893),r=s(7536);s(6311);const n=/./,i=e=>{let{name:t,label:s,type:i,required:o,pattern:l=n,message:c=""}=e;var d;const m=(0,r.Gc)(),{register:p,formState:{errors:g}}=m;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{children:[s,(0,a.jsx)("br",{}),(0,a.jsx)("input",Object.assign({type:i,className:"input"},p(t,{required:o,pattern:{value:l,message:c}})))]}),(0,a.jsx)("p",Object.assign({className:"error_message"},{children:null===(d=g[t])||void 0===d?void 0:d.message}))]})}},759:(e,t,s)=>{s.d(t,{Z:()=>g});var a=s(5893),r=s(7294),n=s(7536);const i=()=>(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"32",viewBox:"0 0 384 512"},{children:(0,a.jsx)("path",{fill:"currentColor",d:"M192 0q-52 0-90 38t-38 90v64q-27 0-45.5 18.5T0 \r\n          256v192q0 27 18.5 45.5T64 512h256q27 0 45.5-18.5T384 \r\n          448V256q0-27-18.5-45.5T320 192v-64q0-52-38-90T192 \r\n          0zm149 256v192q0 21-21 21H64q-21 0-21-21V256q0-21 \r\n          21-21h256q21 0 21 21zm-234-64v-64q0-35 25-60t60-25t60 \r\n          25t25 60v64H107zm85 64q-27 0-45.5 18.5T128 320q0 20 \r\n          12 36.5t31 23.5v25q0 22 21 22t21-22v-25q43-15 \r\n          43-60q0-27-18.5-45.5T192 256zm0 85q-21 0-21-21t21-21t21 \r\n          21t-21 21z"})})),o=()=>(0,a.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"32",viewBox:"0 0 384 512"},{children:(0,a.jsx)("path",{fill:"currentColor",d:"M192 43q35 0 60 25t25 60q0 21 22 21q21 0 21-21q0-52-38-90T192 \r\n          0t-90 38t-38 90v64q-27 0-45.5 18.5T0 256v192q0 27 18.5 45.5T64 \r\n          512h256q27 0 45.5-18.5T384 448V256q0-27-18.5-45.5T320 \r\n          192H107v-64q0-35 25-60t60-25zm128 192q21 0 21 21v192q0 21-21 \r\n          21H64q-21 0-21-21V256q0-21 21-21h256zM171 380v25q0 22 21 \r\n          22t21-22v-25q43-15 43-60q0-27-18.5-45.5T192 256t-45.5 18.5T128 \r\n          320q0 20 12 36.5t31 23.5zm21-81q21 0 21 21t-21 21t-21-21t21-21z"})})),l="pages-ProfilePage-ui-PasswordInput-password-input__password",c="pages-ProfilePage-ui-PasswordInput-password-input__password_input",d="pages-ProfilePage-ui-PasswordInput-password-input__switch",m="pages-ProfilePage-ui-PasswordInput-password-input__switch_input";s(6311);const p=/^[a-zA-Z0-9=+-_@!?$%]{8,}$/,g=e=>{let{name:t,label:s,required:g,pattern:u=p,message:h="Пароль должен состоять из 8 символов a-z, A-Z, 0-9, _, -, @, +, =, ?, !, $, %"}=e;var v;const[j,x]=(0,r.useState)("password"),f=(0,n.Gc)(),{register:q,formState:{errors:b}}=f;return(0,a.jsxs)("div",Object.assign({className:l},{children:[(0,a.jsxs)("label",{children:[s,(0,a.jsx)("br",{}),(0,a.jsx)("input",Object.assign({className:c,type:j},q(t,{required:g,pattern:{value:u,message:h}}))),(0,a.jsxs)("label",Object.assign({className:d},{children:[(0,a.jsx)("input",{type:"checkbox",onChange:()=>{x("text"===j?"password":"text")},className:m}),"text"===j?(0,a.jsx)(o,{}):(0,a.jsx)(i,{})]}))]}),(0,a.jsx)("p",Object.assign({className:"error_message"},{children:null===(v=b[t])||void 0===v?void 0:v.message}))]}))}},6311:()=>{}}]);